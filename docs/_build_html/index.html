

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>First Python Notebook &mdash; First Python Notebook  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="First Python Notebook  documentation" href="#"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> First Python Notebook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">First Python Notebook</a><ul>
<li><a class="reference internal" href="#what-you-will-learn">What you will learn</a></li>
<li><a class="reference internal" href="#about-the-data">About the data</a></li>
<li><a class="reference internal" href="#about-the-author">About the author</a></li>
<li><a class="reference internal" href="#prelude-prequisites">Prelude: Prequisites</a></li>
<li><a class="reference internal" href="#act-1-hello-notebook">Act 1: Hello notebook</a></li>
<li><a class="reference internal" href="#act-2-hello-pandas">Act 2: Hello pandas</a></li>
<li><a class="reference internal" href="#act-3-hello-analysis">Act 3: Hello analysis</a></li>
<li><a class="reference internal" href="#act-4-hello-science">Act 4: Hello science</a></li>
<li><a class="reference internal" href="#act-5-hello-internet">Act 5: Hello Internet</a></li>
<li><a class="reference internal" href="#epilogue-hello-charts">Epilogue: Hello charts</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">First Python Notebook</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>First Python Notebook</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="first-python-notebook">
<h1>First Python Notebook<a class="headerlink" href="#first-python-notebook" title="Permalink to this headline">¶</a></h1>
<p>A step-by-step guide to analyzing data with Python and the Jupyter Notebook.</p>
<div class="section" id="what-you-will-learn">
<h2>What you will learn<a class="headerlink" href="#what-you-will-learn" title="Permalink to this headline">¶</a></h2>
<p>This six-hour tutorial will guide you through an investigation of money in politics using data from the <a class="reference external" href="http://www.californiacivicdata.org/">California Civic Data Coalition</a>.</p>
<p>You will learn just enough Python to work with the powerful <a class="reference external" href="http://pandas.pydata.org/">pandas</a>  data analysis library, a popular open-source tool for working with large data files. The course will teach you how to use pandas to read, filter, join, rank, group and aggregate structured data.</p>
<p>You will learn how to record, remix and republish your analysis using the <a class="reference external" href="http://jupyter.org/">Jupyter Notebook</a>, a browser-based app for writing code that is emerging as the standard for sharing reproducible research in the sciences.</p>
<p>And most important: you will see how these tools can increase the speed and veracity of your journalism.</p>
</div>
<div class="section" id="about-the-data">
<h2>About the data<a class="headerlink" href="#about-the-data" title="Permalink to this headline">¶</a></h2>
<p>The course is based on data provided by the <a class="reference external" href="http://www.californiacivicdata.org/">California Civic Data Coalition</a>, an open-source network of journalists and computer programmers working to ease access to the state&#8217;s jumbled, dirty and difficult database tracking money in politics.</p>
<p>The state&#8217;s campaign and lobbying data has been used to develop insightful journalism like:</p>
<ul class="simple">
<li><a class="reference external" href="http://articles.latimes.com/print/2007/oct/05/local/me-nunez5">Campaign cash gives Nunez rich travel style</a>, <cite>Los Angeles Times</cite>, Oct. 5, 2007</li>
<li><a class="reference external" href="http://cironline.org/reports/california-speaker-gives-assemblys-juiciest-jobs-biggest-fundraisers-4501">California speaker gives Assembly&#8217;s juiciest jobs to biggest fundraiser</a>, <cite>Center for Investigative Reporting</cite>, May 15, 2013</li>
<li><a class="reference external" href="http://www.latimes.com/local/politics/la-me-ff-pol-1101-proposition47-20141101-story.html">Prop. 47 puts state at center of a national push for sentencing reform</a>, <cite>Los Angeles Times</cite>, Nov. 1, 2014</li>
<li><a class="reference external" href="http://www.sacbee.com/news/politics-government/capitol-alert/article80197182.html">Connecting the donor dots in California outside spending campaigns</a>, <cite>Sacramento Bee</cite>, May 26, 2016</li>
<li><a class="reference external" href="http://www.mercurynews.com/2016/08/20/sacramentos-new-slush-funds-ballot-measure-committees/">Sacramento&#8217;s new &#8216;slush funds&#8217;: Ballot-measure committees</a>, <cite>San Jose Mercury News</cite>, Aug. 20, 2016</li>
</ul>
<p>The goal of the coalition&#8217;s work is to make the data those reporters used easier to access, understand and analyze. Learn more about the status of the project and the data you can download <a class="reference external" href="http://www.californiacivicdata.org/2016/09/15/website-launch/">here</a>.</p>
</div>
<div class="section" id="about-the-author">
<h2>About the author<a class="headerlink" href="#about-the-author" title="Permalink to this headline">¶</a></h2>
<p>This course was first developed by <a class="reference external" href="http://palewi.re/who-is-ben-welsh/">Ben Welsh</a> for a Octobert 2016, <a class="reference external" href="http://www.californiacivicdata.org/2016/10/08/first-python-notebook/">&#8220;watchdog workshop&#8221;</a> organized by Investigative Reporters and Editors at San Diego State University&#8217;s school of journalism. It was revised for a February 2017, hands-on training of students at Stanford&#8217;s journalism school. It is scheduled to be taught <a class="reference external" href="https://www.ire.org/events-and-training/event/2702/2879/">a six-hour class</a> at the annual conference of the National Institute for Computer-Assisted Reporting in March 2017.</p>
<p>Ben is the editor of the Data Desk, a team of reporters and programmers in the Los Angeles Times newsroom. He is also a co-founder of the California Civic Data Coalition.</p>
</div>
<div class="section" id="prelude-prequisites">
<h2>Prelude: Prequisites<a class="headerlink" href="#prelude-prequisites" title="Permalink to this headline">¶</a></h2>
<p>Before you can begin, your computer needs the following tools installed and working to participate.</p>
<ol class="arabic simple">
<li>A <a class="reference external" href="https://en.wikipedia.org/wiki/Command-line_interface">command-line interface</a> to interact with your computer</li>
<li>Version 2.7 of the <a class="reference external" href="http://python.org/download/releases/2.7.6/">Python</a> programming language</li>
<li>The <a class="reference external" href="https://pip.pypa.io/en/latest/installing.html">pip</a> package manager and <a class="reference external" href="http://www.virtualenv.org/en/latest/">virtualenv</a> environment manager for Python</li>
<li>A code compiler that can install our heavy-duty analysis tools</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Stop and make sure you have all these tools installed and working properly. Otherwise, <a class="reference external" href="https://www.youtube.com/watch?v=ynxPshq8ERo">you&#8217;re gonna have a bad time</a>.</p>
</div>
<div class="section" id="id2">
<h3>Command-line interface<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Unless something is wrong with your computer, there should be a way to open a window that lets you type in commands. Different operating systems give this tool slightly different names, but they all have some form of it, and there are alternative programs you can install as well.</p>
<p>On Windows you can find the command-line interface by opening the &#8220;command prompt.&#8221; Here are instructions for <a class="reference external" href="https://www.bleepingcomputer.com/tutorials/windows-command-prompt-introduction/">Windows</a>. On Apple computers, you open the <a class="reference external" href="http://blog.teamtreehouse.com/introduction-to-the-mac-os-x-command-line">&#8220;Terminal&#8221; application</a>. Ubuntu Linux comes with a program of the <a class="reference external" href="http://askubuntu.com/questions/38162/what-is-a-terminal-and-how-do-i-open-and-use-it">same name</a>.</p>
</div>
<div class="section" id="git-and-github">
<h3>Git and GitHub<a class="headerlink" href="#git-and-github" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://git-scm.com/">Git</a> is a version control program for saving the changes
you make to files over time. This is useful when you&#8217;re working on your own,
but quickly becomes essential with large software projects, especially if you work with other developers.</p>
<p><a class="reference external" href="https://github.com/">GitHub</a> is a website that hosts git code repositories, both public and private. It comes
with many helpful tools for reviewing code and managing projects. It also has some
<a class="reference external" href="http://pages.github.com/">extra tricks</a> that make it easy to publish web pages, which we will use later.</p>
<p>For this class you will need to have git installed and working from your command prompt.</p>
<p>If you need to install git, you can learned how by following one of these guides for
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-windows">Windows</a>,
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-mac">Mac</a> and
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-linux">Linux</a> computers. Or you can try to download and install the program directly from its creators&#8217; <a class="reference external" href="https://git-scm.com/">website</a>.</p>
<p>After git is installed, you can verify it&#8217;s working on your command prompt by entering the follow code and hitting the enter key:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git --version
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You&#8217;ll note that the example above begins with a &#8220;$&#8221;. You do not need to type this. It is only a generic symbol
commonly used by geeks to indicate a piece of code should be run from the command line. On Windows, this prompt could even look quite different, likely starting with a phrase like <code class="docutils literal"><span class="pre">C:\</span></code>.</p>
</div>
<p>If git is installed and working, you should see something like this:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git --version
git version <span class="m">2</span>.9.3
</pre></div>
</div>
<p>Once that&#8217;s done, you should create an account at GitHub, if you don&#8217;t already have one.
It shouldn&#8217;t cost you anything. <a class="reference external" href="https://github.com/pricing">The free plan</a>
is all that&#8217;s required to complete this lesson.</p>
</div>
<div class="section" id="id4">
<h3>Python<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="for-apples">
<h4>For Apples<a class="headerlink" href="#for-apples" title="Permalink to this headline">¶</a></h4>
<p>If you are using Mac OSX, Python version 2.7 is probably already installed and you can test to see what version, if any, is already available by typing the following into your terminal.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python -V
</pre></div>
</div>
<p>You should see something like this after you hit enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python -V
Python <span class="m">2</span>.7.12
</pre></div>
</div>
<p>If you get an error instead, Mac users should install Python by following <a class="reference external" href="http://docs.python-guide.org/en/latest/starting/install/osx/">these instructions</a> offered by The Hitchhikers Guide to Python.</p>
</div>
<div class="section" id="for-windows">
<h4>For Windows<a class="headerlink" href="#for-windows" title="Permalink to this headline">¶</a></h4>
<p>Just like Apple users, Windows people should open their command prompt and investigate whether Python is already installed.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python -V
</pre></div>
</div>
<p>You should see something like this after you hit enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python -V
Python <span class="m">2</span>.7.12
</pre></div>
</div>
<p>If not Windows users can find a similar installation guide <a class="reference external" href="http://docs.python-guide.org/en/latest/starting/install/win/">here</a> which will have you try downloading and installing Python from <a class="reference external" href="https://www.python.org/downloads/release/python-2712/">here</a>. After that&#8217;s done, ensure Python is installed by reopening the command prompt and running the command above again.</p>
</div>
</div>
<div class="section" id="pip-and-virtualenv">
<h3>pip and virtualenv<a class="headerlink" href="#pip-and-virtualenv" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://pip.pypa.io/en/latest/">pip package manager</a> makes it easy to install open-source libraries that expand what you&#8217;re able to do with Python. Later, we will use it to install everything needed to create a working web application.</p>
<p>Verify pip is installed with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip -V
</pre></div>
</div>
<p>If you don&#8217;t have it already, you can get pip by following <a class="reference external" href="https://https://pip.pypa.io/en/latest/ip.pypa.io/en/latest/installing.html">these instructions</a>.</p>
<p>The <a class="reference external" href="http://www.virtualenv.org/en/latest/">virtualenv environment manager</a> makes it possible to create an isolated corner of your computer where all the different tools you use to build an application are sealed off.</p>
<p>It might not be obvious why you need this, but it quickly becomes important when you need to juggle different tools for different projects on one computer. By developing your applications inside separate virtualenv environments, you can use different versions of the same third-party Python libraries without a conflict. You can also more easily recreate your project on another machine, handy when you want to copy your code to a server that publishes pages on the Internet.</p>
<p>You can check if virtualenv is installed with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>virtualenv --version
</pre></div>
</div>
<p>If you don&#8217;t have it, install it with pip.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install virtualenv
<span class="c1"># If you&#39;re on a Mac or Linux and get an error saying you lack permissions,</span>
<span class="c1"># try again as a superuser.</span>
sudo pip install virtualenv
</pre></div>
</div>
<p>If that doesn&#8217;t work, <a class="reference external" href="http://virtualenv.readthedocs.org/en/latest/installation.html">try following this advice</a>.</p>
</div>
<div class="section" id="code-compiler">
<h3>Code compiler<a class="headerlink" href="#code-compiler" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference external" href="https://en.wikipedia.org/wiki/Compiler">code compiler</a> is a tool that lets your computer installed more advanced software. It is required to take advantage of the pandas data analysis library.</p>
<div class="section" id="id9">
<h4>For Apples<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>If you are using Mac OSX, you need to have XCode, Apple&#8217;s developer kit that includes a tool for compiling heavy-duty software.</p>
<p>You can make sure you&#8217;ve got it by running this on your command prompt.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>xcode-select --install
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h4>For Windows<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>Windows users will need to download and install <a class="reference external" href="https://www.microsoft.com/en-us/download/details.aspx?id=44266">this Microsoft package</a>, a compiler that will allow us to install other Python tools later.</p>
<p>With all that done, you&#8217;re now ready to start the class.</p>
</div>
</div>
</div>
<div class="section" id="act-1-hello-notebook">
<h2>Act 1: Hello notebook<a class="headerlink" href="#act-1-hello-notebook" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference external" href="http://jupyter.org/">Jupyter Notebook</a> is a browser application where you can write, run, remix and republish code. It is free software you can install and run like any other open-source library. It is used by <a class="reference external" href="http://nbviewer.jupyter.org/github/robertodealmeida/notebooks/blob/master/earth_day_data_challenge/Analyzing%20whale%20tracks.ipynb">scientists</a>, <a class="reference external" href="http://nbviewer.jupyter.org/github/nealcaren/workshop_2014/blob/master/notebooks/5_Times_API.ipynb">scholars</a>, <a class="reference external" href="https://github.com/rsvp/fecon235/blob/master/nb/fred-debt-pop.ipynb">investors</a> and corporations to create and share their work.</p>
<p>It is also used by journalists to develop stories and show their work. Examples include:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/BuzzFeedNews/2016-01-tennis-betting-analysis/blob/master/notebooks/tennis-analysis.ipynb">&#8220;The Tennis Racket&#8221;</a> by BuzzFeed and the BBC</li>
<li><a class="reference external" href="https://github.com/datadesk/california-electricity-capacity-analysis/blob/master/analysis.ipynb">&#8220;Californians are paying billions for power they don&#8217;t need&#8221;</a> by the Los Angeles Times</li>
<li><a class="reference external" href="https://github.com/propublica/compas-analysis/blob/master/Compas%20Analysis.ipynb">&#8220;Machine bias&#8221;</a> by ProPublica</li>
</ul>
<p>The first step in our lesson is to get Jupyter&#8217;s software installed. We&#8217;re going to start that process by creating a new development environment with virtualenv in your terminal. Name it after our application.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>virtualenv first-python-notebook
</pre></div>
</div>
<p>Jump into the directory it created.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> first-python-notebook
</pre></div>
</div>
<p>Turn on the new virtualenv, which will instruct your terminal to only use those libraries installed inside its sealed space. You only need to create the virtual environment once, but you will need to repeat these &#8220;activation&#8221; steps each time you return to working on this project.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># In Linux or Mac OSX try this...</span>
. bin/activate
<span class="c1"># In Windows it might take something more like...</span>
<span class="nb">cd</span> Scripts
activate
<span class="nb">cd</span> ..
</pre></div>
</div>
<p>Use <code class="docutils literal"><span class="pre">pip</span></code> on the command line to install Jupyter Notebook.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install jupyter
</pre></div>
</div>
<p>Start up the notebook from your terminal.</p>
<div class="highlight-base"><div class="highlight"><pre><span></span>jupyter notebook
</pre></div>
</div>
<p>That will open up a new tab in your default web browser that looks something like this:</p>
<img alt="_images/notebook.png" src="_images/notebook.png" />
<p>Click the &#8220;New&#8221; button in the upper right and create a new Python 2 notebook. Now you are all setup and ready to start writing code.</p>
<p>Do not stress. There is nothing too fancy about it. You can start by just doing a little simple math.</p>
<p>Type the following into the first box, then hit the play button in the toolbar above the notebook (or hit SHIFT+ENTER on your keyboard).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span>
</pre></div>
</div>
<img alt="_images/2_plus_2.png" src="_images/2_plus_2.png" />
<p>There. You have just written your first Python code. You have entered two integers and added them together using the plus sign operator. Not so bad, right?</p>
<p>Now it is the time for us to get our hands on some real data and get some real work done. To do that, we need some real tools.</p>
</div>
<div class="section" id="act-2-hello-pandas">
<h2>Act 2: Hello pandas<a class="headerlink" href="#act-2-hello-pandas" title="Permalink to this headline">¶</a></h2>
<p>Lucky for us, Python is filled with functions to do pretty much anything you’d ever want to do with a programming language: <a class="reference external" href="http://docs.python-requests.org/">navigate the web</a>, <a class="reference external" href="https://docs.python.org/2/library/csv.html">parse data</a>, <a class="reference external" href="http://www.sqlalchemy.org/">interact with a database</a>, <a class="reference external" href="https://www.scipy.org/">run fancy statistics</a>, <a class="reference external" href="https://www.djangoproject.com/">build a pretty website</a> and <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/">so</a> <a class="reference external" href="http://www.nltk.org/">much</a> <a class="reference external" href="http://pillow.readthedocs.io/en/3.4.x/index.html">more</a>. Creative people have put these tools to work to get <a class="reference external" href="https://www.python.org/about/success/">a wide range of things done</a> in the arts, technology and even outer space.</p>
<p>Some of those tools are included in a toolbox that comes with the language, known as the standard library. Others have been built by members of Python&#8217;s developer community and need to be downloaded and installed from the web.</p>
<p>For this exercise, we&#8217;re going to install and use <a class="reference external" href="http://pandas.pydata.org/">pandas</a>, a tool developed at a financial investment firm that has become a leading open-source tool for accessing and analyzing data.</p>
<p>We&#8217;ll install pandas the same way we installed the Jupyter Notebook earlier: Our friend <code class="docutils literal"><span class="pre">pip</span></code>. Save your notebook, switch to your command prompt and hit <code class="docutils literal"><span class="pre">CTRL-C</span></code>. That will kill your notebook and return you to the command line. There we&#8217;ll install pandas.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pandas</span>
</pre></div>
</div>
<p>Now let&#8217;s restart our notebook and get back to work.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
<p>Use the next open notebook cell to import the pandas library for use in our script. Type in the following and hit the play button again.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
</pre></div>
</div>
<img alt="_images/import_pandas.png" src="_images/import_pandas.png" />
<p>If nothing happens, that&#8217;s good. It means you have pandas installed and ready to work.</p>
<p>If you get an error message, return to the prequisites section above and make sure you have everything installed properly. If you do and it still doesn&#8217;t work, copy and paste the tail end of your error message into Google. Among the results there will almost certainly be others working through the same problem.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>As we continue through the lesson you should assume all of the code we write is in a new cell run separately from the previous line.</p>
<p>Breaking up your code like this so you can run it bit by bit is one of the big advantages of the Jupyter Notebook. If you get an error after you run a cell, look carefully at your code and see that it exactly matches what&#8217;s been written in the example.</p>
<p class="last">Once they match, try running it again. Don&#8217;t worry, that kind of feedback loop is the workaday struggle of computer programming.</p>
</div>
<p>Now that we&#8217;ve got <code class="docutils literal"><span class="pre">pandas</span></code> loaded, let&#8217;s put it to work.</p>
<p>Until last November, the use and sale of marijuana for recreational purposes was illegal in California. That changed when voters approved Proposition 64, which asked voters if the practice ought to be legalized. A yes vote supported legalization. A no vote opposed it. <a class="reference external" href="http://elections.cdn.sos.ca.gov/sov/2016-general/sov/65-ballot-measures-formatted.pdf">In the final tally</a>, 57% of voters said yes.</p>
<p>Your mission, <a class="reference external" href="https://www.youtube.com/watch?v=0TiqXFssKMY">should you choose to accept it</a>, is to analyze lists of campaign committees and contributors to figure out the biggest donors both for and against the measure.</p>
<p>To start <a class="reference external" href="http://first-python-notebook.readthedocs.io/en/latest/_static/prop-committees.csv">click here</a> to download a list of last November&#8217;s 17 ballot measures and their affiliated fundraising committees.</p>
<p>The data are structured in rows of comma-separated values. This is known as a CSV file. It is the most common way you will find data published online. Save the file with the name <code class="docutils literal"><span class="pre">prop-committees.csv</span></code> in the same directory where you made your notebook.</p>
<p>Open the file in your notebook using the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">read_csv</a> function in <code class="docutils literal"><span class="pre">pandas</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;prop-committees.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After you run the cell, you should see something like this.</p>
<img alt="_images/read_csv.png" src="_images/read_csv.png" />
<p>It is a <code class="docutils literal"><span class="pre">DataFrame</span></code> where <code class="docutils literal"><span class="pre">pandas</span></code> has structured the CSV data into rows and columns, just like Excel or other spreadsheet software might. The advantage offered here is that rather than manipulating the data through a haphazard series of clicks and keypunches we will be gradually grinding down the data using a computer programming script that is 100% transparent and reproducible.</p>
<p>In order to do that, we need to store our <code class="docutils literal"><span class="pre">DataFrame</span></code> so it can be reused in subsequent cells. We can do this by saving in a <a class="reference external" href="https://en.wikipedia.org/wiki/Variable_(computer_science)">&#8220;variable&#8221;</a>, which is a fancy computer programming word for a named shortcut where we save our work as we go.</p>
<p>Go back to your initial cell and change it to this. Then rerun it.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;./docs/_static/prop-committees.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After you run it, you shouldn&#8217;t see anything. That&#8217;s a good thing. It means our <code class="docutils literal"><span class="pre">DataFrame</span></code> has been saved under the name <code class="docutils literal"><span class="pre">props</span></code>, which we can now begin interacting with in the cells that follow. We can do this by calling <a class="reference external" href="https://en.wikipedia.org/wiki/Method_(computer_programming)">&#8220;methods&#8221;</a> that <code class="docutils literal"><span class="pre">pandas</span></code> has made available to all <code class="docutils literal"><span class="pre">DataFrames</span></code>. There are dozens of these that can do all sorts of interesting things. Let&#8217;s start with some easy ones that analysts
use all the time.</p>
<p>First, to preview the first few rows of the dataset, try the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html">head</a> method. Hit the <code class="docutils literal"><span class="pre">+</span></code> button in the toolbar to add a new cell below the first one. Type this in it and hit the run button again.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/head.png" src="_images/head.png" />
<p>To get a look at all of the columns and what type of data they store, add another cell and try <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.info.html">info</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/info.png" src="_images/info.png" />
<p>Look carefully at those results and you see we have more than 100 links between committees and propositions. That&#8217;s interesting on its own, but our goal is to focus in on just one: Prop 64.</p>
<p>Quick studies will have already noted the <code class="docutils literal"><span class="pre">prop_name</span></code> column where each committee&#8217;s affiliation is stored. Let&#8217;s use pandas to drill down on it. To see its contents separate from the rest of the <code class="docutils literal"><span class="pre">DataFrame</span></code>, add its name to the variable following a period. That should list out the whole thing.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">prop_name</span>
</pre></div>
</div>
<img alt="_images/column.png" src="_images/column.png" />
<p>One of the many cool tricks built in to <code class="docutils literal"><span class="pre">pandas</span></code> is the ability to total up the frequency of values in a column with the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html">value_counts</a> method. We can use it here to total up how many committees were active for each proposition.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">prop_name</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/value_counts.png" src="_images/value_counts.png" />
<p>You may have noticed that both of the previous methods did not return a clean looking table in the same way as <code class="docutils literal"><span class="pre">head</span></code>. It&#8217;s often hard to anticipate, but in these cases and many others <code class="docutils literal"><span class="pre">pandas</span></code> will sometimes return an ugly <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html">Series</a> rather than more aesthetically pleasing (and powerful) <code class="docutils literal"><span class="pre">DataFrame</span></code>.</p>
<p>If that sounds like a bunch of mumbo jumbo, that&#8217;s because it is! Like most computer programming tools, <code class="docutils literal"><span class="pre">pandas</span></code> has its own odd quirks that you have to pick up as you go. The difference between a <code class="docutils literal"><span class="pre">Series</span></code> and a <code class="docutils literal"><span class="pre">DataFrame</span></code> is one of those. The key is to not worry about it too much and keep hacking.</p>
<p>In most instances, if you have an ugly series generated by a method like <code class="docutils literal"><span class="pre">value_counts</span></code> and you want to convert it into a <code class="docutils literal"><span class="pre">DataFrame</span></code> you can do so by tacking on the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.reset_index.html">reset_index</a> method onto the tail end. Why? Again the answer is &#8220;because <code class="docutils literal"><span class="pre">pandas</span></code> says so.&#8221; So let&#8217;s play along.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">prop_name</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/value_counts_df.png" src="_images/value_counts_df.png" />
<p>Now that we&#8217;ve seen all the propositions in the dataset, we&#8217;re ready to take a crucial step towards our goal by filtering the list down to just those committees that supported or opposed Proposition 64.</p>
<p>We can do that by copying the full name of the proposition that appears in the dataset and inserting it into the following statement, which follows the <code class="docutils literal"><span class="pre">pandas</span></code> system for filtering a <code class="docutils literal"><span class="pre">DataFrame</span></code>.</p>
<p>You start with the variable you want to filter, and then create an evaluation by combining a column with an <a class="reference external" href="https://en.wikipedia.org/wiki/Operator_(computer_programming)">&#8220;operator&#8221;</a> like <code class="docutils literal"><span class="pre">==</span></code> or <code class="docutils literal"><span class="pre">&gt;</span></code> or <code class="docutils literal"><span class="pre">&lt;</span></code> with a value to compare the field against.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="p">[</span><span class="n">props</span><span class="o">.</span><span class="n">prop_name</span> <span class="o">==</span> <span class="s1">&#39;PROPOSITION 064- MARIJUANA LEGALIZATION. INITIATIVE STATUTE.&#39;</span><span class="p">]</span>
</pre></div>
</div>
<img alt="_images/prop_filter.png" src="_images/prop_filter.png" />
<p>Now that we&#8217;ve seen what it outputs, we should save the results of that filter into new variable separate from the full list we imported from the CSV file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">prop</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="n">props</span><span class="o">.</span><span class="n">prop_name</span> <span class="o">==</span> <span class="s1">&#39;PROPOSITION 064- MARIJUANA LEGALIZATION. INITIATIVE STATUTE.&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The find out how many records are left after the filter, we can use Python&#8217;s built-in <a class="reference external" href="https://docs.python.org/2/library/functions.html#len">len</a> function to inspect our new variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/prop_len.png" src="_images/prop_len.png" />
<p>With that we&#8217;re ready to move on to a related, similar task: Importing all of the individual contributions reported to last year&#8217;s 17 ballot measures and filtering them down to just those supporting and opposing Proposition 64.</p>
<p>We&#8217;ll start by downloading <a class="reference external" href="http://first-python-notebook.readthedocs.io/en/latest/_static/contributions.csv">this second CSV file</a> and saving it to the same directory as this notebook with the name <code class="docutils literal"><span class="pre">contributions.csv</span></code>. We&#8217;ll then open it with <code class="docutils literal"><span class="pre">read_csv</span></code> and save it as a new variable just as we did above.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">contribs</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;contributions.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The contributions file you&#8217;re downloading is an experimental early release from <a class="reference external" href="www.californiacivicdata.org">the California Civic Data Coalition&#8217;s effort</a> to streamline the state&#8217;s jumbled, dirty and disorganized official database. It has not yet been fully verified as accurate by our team and any conclusions you draw from it should be considered as provisional.</p>
<p class="last">If you want to base a news report off the analysis you do here, you should take the additional step of comparing the numbers you produce against the official data <a class="reference external" href="http://cal-access.sos.ca.gov/">released by the Secretary of State</a>.</p>
</div>
<p>Just as we did earlier, you can inspect the contents of this new file with the <code class="docutils literal"><span class="pre">head</span></code> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">contribs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/contribs_head.png" src="_images/contribs_head.png" />
<p>You should also inspect the columns using the <code class="docutils literal"><span class="pre">info</span></code> method. Running these two tricks whenever you open a new file is a good habit to develop so that you can carefully examine the data you&#8217;re about to work with.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">contribs</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/contribs_info.png" src="_images/contribs_info.png" />
<p>Our next job is to filter down this list, which includes all disclosed contributions to all proposition campaigns, to just those linked to Proposition 64.</p>
<p>We could try to do this with a filter, as we did above with the committees. But look carefully at the columns listed above in the contribution file&#8217;s <code class="docutils literal"><span class="pre">info</span></code> output. You will notice that this file contains a field called <code class="docutils literal"><span class="pre">calaccess_committee_id</span></code> that is identical to the one found in the committee CSV.</p>
<p>That&#8217;s because these two files are drawn from a <a class="reference external" href="https://en.wikipedia.org/wiki/Relational_database">&#8220;relational database&#8221;</a> that tracks a variety of information about campaigns using an array of tables linked by common identifiers. In this case, the unique identifying codes of committees in one table can be expected to match those found in another.</p>
<p>We can therefore safely join the two files using the <code class="docutils literal"><span class="pre">`pandas</span></code> <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge.html">merge</a> method. By default this method will return only those rows with ids found in both tables. That means that if we join the full contributions file to our filtered list of Proposition 64 committees, only the contributions to the Proposition 64 committees will remain.</p>
<p>Here&#8217;s how to do it. It&#8217;s as simple as passing both variables to <code class="docutils literal"><span class="pre">merge</span></code> and specifying which field we&#8217;d like to join with. We will save the result into another new variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">contribs</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;calaccess_committee_id&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>That new <code class="docutils literal"><span class="pre">DataFrame</span></code> variable can inspected just as the ones above.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/merged_head.png" src="_images/merged_head.png" />
<p>After all that we have created a new dataset that includes only contributions supporting and opposing Proposition 64. We&#8217;re ready to move on from preparing our data to interviewing it.</p>
</div>
<div class="section" id="act-3-hello-analysis">
<h2>Act 3: Hello analysis<a class="headerlink" href="#act-3-hello-analysis" title="Permalink to this headline">¶</a></h2>
<p>In some ways, your database is no different from a human source. Getting a good story requires careful, thorough questioning. In this section we will move ahead by conducting an interview with <code class="docutils literal"><span class="pre">pandas</span></code> to pursue our quest of finding out the biggest donors to Proposition 64.</p>
<p>Let&#8217;s start with something easy. What were the ten biggest contributions? We can find the answer by using the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html">sort_values</a> method to rearrange our list using the <code class="docutils literal"><span class="pre">amount</span></code> field.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/merged_sort.png" src="_images/merged_sort.png" />
<p>Note that returns the <code class="docutils literal"><span class="pre">DataFrame</span></code> resorted in ascending order from lowest to highest. To answer our question you&#8217;ll need to reverse it. Here&#8217;s how:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/merged_sort_desc.png" src="_images/merged_sort_desc.png" />
<p>You can limit the result to the top five by returning to the <code class="docutils literal"><span class="pre">head</span></code> method and passing in the number of results we&#8217;d like.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/merged_sort_head.png" src="_images/merged_sort_head.png" />
<p>Question one answered. Here&#8217;s number two: What is the total sum of contributions that have been reported?</p>
<p>To answer that let&#8217;s start by getting our hands on <code class="docutils literal"><span class="pre">amount</span></code>, the column with the numbers in it. We can do that just as we did with other columns above.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">amount</span>
</pre></div>
</div>
<img alt="_images/merged_amount.png" src="_images/merged_amount.png" />
<p>Now add up the column&#8217;s total using the <code class="docutils literal"><span class="pre">pandas</span></code> method <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.sum.html">sum</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/merged_amount_sum.png" src="_images/merged_amount_sum.png" />
<p>There&#8217;s our big total. Fun fact: This number is guaranteed to be lower than the totals reported by the campaigns. Why? Campaigns are only required to report the names of donors over $200, so our data is missing all of the donors who gave smaller amounts of money.</p>
<p>The overall totals are reported elsewhere in lump sums and cannot be replicated by adding up the individual contributions. Understanding this is crucial to understanding not just this data, but all campaign finance data.</p>
<p>Adding up a big total is all well and good. But we&#8217;re aiming for something more nuanced. We want to separate the money spent for the proposition from the money spent against it. To do that, we&#8217;ll need to return to the filtering trick we learned above.</p>
<p>First let&#8217;s look at the column we&#8217;re going to filter by, <code class="docutils literal"><span class="pre">committee_position</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">committee_position</span>
</pre></div>
</div>
<img alt="_images/merged_position.png" src="_images/merged_position.png" />
<p>Now let&#8217;s filter our merged table down using that column and the <code class="docutils literal"><span class="pre">pandas</span></code> filtering method that combines a column, an operator and the value we want to filter by.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="p">[</span><span class="n">merged</span><span class="o">.</span><span class="n">committee_position</span> <span class="o">==</span> <span class="s1">&#39;SUPPORT&#39;</span><span class="p">]</span>
</pre></div>
</div>
<img alt="_images/support_filter.png" src="_images/support_filter.png" />
<p>Let&#8217;s stick the result in a variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">support</span> <span class="o">=</span> <span class="n">merged</span><span class="p">[</span><span class="n">merged</span><span class="o">.</span><span class="n">committee_position</span> <span class="o">==</span> <span class="s1">&#39;SUPPORT&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>And count how many contributions are in this new, more limited set.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">support</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/support_len.png" src="_images/support_len.png" />
<p>We can now use this new variable to rank the five biggest supporting contributions by using <code class="docutils literal"><span class="pre">sort_values</span></code> again.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">support</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/support_sort.png" src="_images/support_sort.png" />
<p>Now let&#8217;s repeat all that for opposing contributions. First the filter into a new variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">oppose</span> <span class="o">=</span> <span class="n">merged</span><span class="p">[</span><span class="n">merged</span><span class="o">.</span><span class="n">committee_position</span> <span class="o">==</span> <span class="s1">&#39;OPPOSE&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then a count.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">oppose</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/oppose_len.png" src="_images/oppose_len.png" />
<p>Then a ranking.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">oppose</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/oppose_sort.png" src="_images/oppose_sort.png" />
<p>Now sum up the total disclosed contributions to each for comparison. First the opposition.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">oppose</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/oppose_amount_sum.png" src="_images/oppose_amount_sum.png" />
<p>Then the supporters.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">support</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/support_amount_sum.png" src="_images/support_amount_sum.png" />
<p>The support is clearly larger. But what percent is it of the overall disclosed total? We can find out by combined two <code class="docutils literal"><span class="pre">sum</span></code> calculations using the division operator.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">support</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">merged</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/support_amount_percent.png" src="_images/support_amount_percent.png" />
<p>We&#8217;ve encountered a lot of different committees as we&#8217;ve explored the data. A natural question follows: Which ones have raised the most money?</p>
<p>To figure that out, we&#8217;ll need to group the data by that column and then sum up the <code class="docutils literal"><span class="pre">amount</span></code> for each. We can do that be using the <code class="docutils literal"><span class="pre">pandas</span></code> <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html">groupby</a> method and the <code class="docutils literal"><span class="pre">sum</span></code> trick we&#8217;ve already learned.</p>
<p>If you scroll back up and look carefully as the <code class="docutils literal"><span class="pre">info</span></code> command we ran after merging out data, you will noticed it includes a column named <code class="docutils literal"><span class="pre">committee_name_x</span></code> and <code class="docutils literal"><span class="pre">commitee_name_y</span></code>. That is because the field was present on both our committee list and our contributions list prior to joining them together. Rather than drop one of them, <code class="docutils literal"><span class="pre">pandas</span></code> is trained to keep them both and to append suffixes to the end.</p>
<p>That&#8217;s the field we want to group by here. Since they are identical, it doesn&#8217;t matter which one we pick. Let&#8217;s go with x.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;committee_name_x&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/committee_group.png" src="_images/committee_group.png" />
<p>Again our data has come back as an ugly <code class="docutils literal"><span class="pre">Series</span></code>. To reformat it as a pretty <code class="docutils literal"><span class="pre">DataFrame</span></code> use the <code class="docutils literal"><span class="pre">reset_index</span></code> method again.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;committee_name_x&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/committee_group_df.png" src="_images/committee_group_df.png" />
<p>Sorting the biggest totals to the top is as easy as appending the <code class="docutils literal"><span class="pre">sort_values</span></code> trick we already know to the end. And voila there&#8217;s our answer.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;committee_name_x&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/committee_group_sort.png" src="_images/committee_group_sort.png" />
<p>Finding the top contributors is just as easy. We only need to substitute the name fields into the <code class="docutils literal"><span class="pre">groupby</span></code> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;contributor_firstname&quot;</span><span class="p">,</span> <span class="s2">&quot;contributor_lastname&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/name_group.png" src="_images/name_group.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should be noticing that several of the top contributors appear to be the same person with their name entered in slightly different ways. This is another important lesson of campaign contributions data. Virtually none of the data is standardized by the campaigns or the government. The onus is on the analyst to show caution and responsibly combine records where the name fields refer to the same person.</p>
</div>
<p>To find out if each contributor supported or opposed the measure, you simple add that field to our <code class="docutils literal"><span class="pre">groupby</span></code> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;contributor_firstname&quot;</span><span class="p">,</span> <span class="s2">&quot;contributor_lastname&quot;</span><span class="p">,</span> <span class="s2">&quot;committee_position&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/name_position_group.png" src="_images/name_position_group.png" />
<p>You&#8217;ve done it. Our brief interview is complete and you&#8217;ve answered the big question that started our inquiry. If you&#8217;re interested in continuing the interview, see if you can answer a few more questions on your own. Here are some ideas:</p>
<ul class="simple">
<li>What percentage of donations came from people who live outside of California?</li>
<li>What are the top employers of donors who gave for and against the measure?</li>
<li>Which committees had the fewest donors?</li>
</ul>
</div>
<div class="section" id="act-4-hello-science">
<h2>Act 4: Hello science<a class="headerlink" href="#act-4-hello-science" title="Permalink to this headline">¶</a></h2>
<p>After all this, you might be thinking &#8220;Computer programming sounds great, but couldn&#8217;t I have done it more efficiently in Excel?&#8221;</p>
<p>Depending on how slick you are with a spreadsheet, the answer might be yes. With the exception of the <code class="docutils literal"><span class="pre">pandas</span></code> trick that merged the two files most of what we did could be achieved with filters and pivot tables taught in spreadsheet classes.</p>
<p>However, for all their flexibility, one of the great weaknesses of working with spreadsheets is that the numerous steps that go into conducting a complex analysis have to be repeated each time, by hand, whenever you want to replicate your work.</p>
<p>For this reason, some scientific projects that aim for transparency and reproducibility are now requiring that each step in a data analysis be documented in a Jupyter Notebook.</p>
<p>That&#8217;s good for its own sake and will help catch errors during pre-publication review, but it has a huge added benefit. At any time you can slightly modify your code and rerun the entire thing from the start.</p>
<p>In this case it means we could instantly reproduce our analysis for each of the 17 ballot measures and conduct a similar data interview in a matter of seconds.</p>
<p>To give it a try, scroll back up to the stop of the notebook and reexamine the list of unique propositions we output with the <code class="docutils literal"><span class="pre">value_counts</span></code> method. You can pick any of them. For this example I am going to pick Proposition 66, which sought (and failed) to end California&#8217;s death penalty.</p>
<p>Copy the proposition&#8217;s full name and replace Proposition 64&#8217;s name in the nearby cell where we created the <code class="docutils literal"><span class="pre">prop</span></code> variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">prop</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="n">props</span><span class="o">.</span><span class="n">prop_name</span> <span class="o">==</span> <span class="s1">&#39;PROPOSITION 066- DEATH PENALTY. PROCEDURES. INITIATIVE STATUTE.&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now pull down the <code class="docutils literal"><span class="pre">Cell</span></code> menu at the top of the notebook and select the <code class="docutils literal"><span class="pre">Run</span> <span class="pre">all</span></code> option.</p>
<img alt="_images/run_all.png" src="_images/run_all.png" />
<p>Moments later, the notebook will repopulate with the answers to all of questions. This time it will be analyzing Prop 66 instead. Try doing that with Excel.</p>
<p>That&#8217;s the end of our lesson for now. We&#8217;ll be working to expand it in the coming weeks as we prepare a longer version for the National Insitute of Computer-Assisted Reporting conference in Jacksonville. If you have any thoughts about how it could be improved or expanded, please email me at <a class="reference external" href="mailto:ben&#46;welsh&#37;&#52;&#48;gmail&#46;com">ben<span>&#46;</span>welsh<span>&#64;</span>gmail<span>&#46;</span>com</a>. You can learn more about our open-source effort to fix California&#8217;s cryptic campaign-finance database at <a class="reference external" href="http://www.californiacivicdata.org/">californiacivicdata.org</a>.</p>
</div>
<div class="section" id="act-5-hello-internet">
<h2>Act 5: Hello Internet<a class="headerlink" href="#act-5-hello-internet" title="Permalink to this headline">¶</a></h2>
<p>In this act, we will publish your notebook to the Internet using <a class="reference external" href="http://www.github.com/">GitHub</a>, a social network for sharing and collaborating on code. GitHub is a platform frequently used by journalists and others to publish their notebooks. As listed above, examples include:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/BuzzFeedNews/2016-01-tennis-betting-analysis/blob/master/notebooks/tennis-analysis.ipynb">&#8220;The Tennis Racket&#8221;</a> by BuzzFeed and the BBC</li>
<li><a class="reference external" href="https://github.com/datadesk/california-electricity-capacity-analysis/blob/master/analysis.ipynb">&#8220;Californians are paying billions for power they don&#8217;t need&#8221;</a> by the Los Angeles Times</li>
<li><a class="reference external" href="https://github.com/propublica/compas-analysis/blob/master/Compas%20Analysis.ipynb">&#8220;Machine bias&#8221;</a> by ProPublica</li>
</ul>
<p>GitHub is an online extension of a command-line tool called <a class="reference external" href="https://git-scm.com/">git</a>, a free and open-source version control tool for tracking and managing changes to code.</p>
<p>The first step in working with git is to convert a directory on your computer into a <a class="reference external" href="https://en.wikipedia.org/wiki/Repository_(version_control)">repository</a> that will have its contents tracked going forward. You do that by returning to your terminal, hitting the <code class="docutils literal"><span class="pre">CTRL-C</span></code> key combination to return the standard command line and entering the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git init .
</pre></div>
</div>
<p>That will instruct git to initialize a new repository in your current folder.</p>
<p>Now visit <a class="reference external" href="http://www.github.com">GitHub</a> and create a new public repository named <code class="docutils literal"><span class="pre">first-python-notebook</span></code>. Don&#8217;t check &#8220;Initialize with README.&#8221; You want to start with a blank repository.</p>
<p>Then connect your local directory to GitHub&#8217;s site with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git remote add origin https://github.com/&lt;yourusername&gt;/first-python-notebook.git
</pre></div>
</div>
<p>Then officially add your notebook file to your repository for tracking with git&#8217;s <code class="docutils literal"><span class="pre">add</span></code> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Using the &#39;*&#39; will add all files that end with ipynb, the notebook&#39;s standard file extension.</span>
$ git add *.ipynb
</pre></div>
</div>
<p>Log its addition with Git&#8217;s <code class="docutils literal"><span class="pre">commit</span></code> command. You can include a personalized message after the <code class="docutils literal"><span class="pre">-m</span></code> flag.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git commit -m <span class="s2">&quot;First commit&quot;</span>
</pre></div>
</div>
<p>If this is your first time using Git, you may be prompted to configure you name and email. If so, take the time now. Then run the <code class="docutils literal"><span class="pre">commit</span></code> command above again.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git config --global user.email <span class="s2">&quot;your@email.com&quot;</span>
$ git config --global user.name <span class="s2">&quot;your name&quot;</span>
</pre></div>
</div>
<p>Now, finally, push your commit up to GitHub.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git push origin master
</pre></div>
</div>
<p>Reload your repository on GitHub and see your handiwork.</p>
<p>If looked at the example above, you&#8217;ve probably noticed that other notebook authors have helpfully summarized and annotated their code by inserting text, links and images between code blocks.</p>
<img alt="_images/markdown_example.png" src="_images/markdown_example.png" />
<p>This is accomplished by adding new cells to your notebook and converting them from the default output, python code, to an alternative called Markdown. <a class="reference external" href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> is a markup language that formats text. It&#8217;s a common lightweight alternative to HTML.</p>
<p>To create and print a new Markdown cell in your notebook, start up your notebook again from the terminal.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ jupyter notebook
</pre></div>
</div>
<p>Now open your notebook file. At the top, add a new cell by clicking the plus button and hitting the up arrow button to move it to the top slot.</p>
<p>Click on the box and use your mouse to pull down the option menu that current reads &#8220;Code&#8221; from the toolbar. Replace it with &#8220;Markdown.&#8221;</p>
<img alt="_images/markdown_pulldown.png" src="_images/markdown_pulldown.png" />
<p>Now click into the cell and type the following:</p>
<div class="highlight-markdown"><div class="highlight"><pre><span></span># First Python Notebook

Hello world!
</pre></div>
</div>
<p>Now hit the play button you will see the result. The first line has been turned into a header because that is how Markdown formats <code class="docutils literal"><span class="pre">#</span></code> at the front of lines. To learn more Markdown rules refer to <a class="reference external" href="http://daringfireball.net/projects/markdown/basics">its documentation</a>.</p>
<img alt="_images/markdown_print.png" src="_images/markdown_print.png" />
<p>Now try adding more cells to your document lower down and annotating individual lines of code before they are run.</p>
<p>After you&#8217;ve finished, save your notebook and return to your terminal so we can commit your work and push it to GitHub. Again, open the terminal and hit the <code class="docutils literal"><span class="pre">CTRL-C</span></code> key combination to halt the notebook.</p>
<p>Again you&#8217;ll want to tell git to log your notebook file changes using <code class="docutils literal"><span class="pre">add</span></code>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add *.ipynb
</pre></div>
</div>
<p>Now log your changes with <code class="docutils literal"><span class="pre">commit</span></code>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git commit -m <span class="s2">&quot;Markdown&quot;</span>
</pre></div>
</div>
<p>Push your commit up to GitHub.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git push origin master
</pre></div>
</div>
<p>Soon after your Markdown edits should appear on the GitHub site alongside your code.</p>
</div>
<div class="section" id="epilogue-hello-charts">
<h2>Epilogue: Hello charts<a class="headerlink" href="#epilogue-hello-charts" title="Permalink to this headline">¶</a></h2>
<p>Python has a number of charting tools that can work hand-in-hand with <code class="docutils literal"><span class="pre">pandas</span></code>. The most popular is <a class="reference external" href="http://matplotlib.org/">matplotlib</a>. It isn&#8217;t the prettiest thing in the world, but it offers straightfoward tools for exploring your data by making quick charts. And, best of all, it can display in your Jupyter Notebook.</p>
<p>Before we start, we&#8217;ll need to make sure <code class="docutils literal"><span class="pre">matplotlib</span></code> is installed. Return to your terminal and try installing it with our buddy pip, as we installed other things before.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install matplotlib
</pre></div>
</div>
<p>After that completes, once again restart your notebook.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ jupyter notebook
</pre></div>
</div>
<p>Now you can open your notebook and add a new cell below the imports that lets the system know you plan to make some charts and that it&#8217;s okay to surface them in the notebook.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
</div>
<img alt="_images/matplotlib_inline.png" src="_images/matplotlib_inline.png" />
<p>Now lets scroll down to the bottom of the notebook and pick up where we last left off in Act 4. As you may recall, we had rerun the notebook from the top with Proposition 66, the question of whether to end California&#8217;s death penalty.</p>
<p>If we want to chart out the top supporters of the proposition, we first need to select them from the dataset. Using the grouping and sorting tricks we learned earlier, the top 10 can returned like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span> <span class="o">=</span> <span class="n">support</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;contributor_firstname&quot;</span><span class="p">,</span> <span class="s2">&quot;contributor_lastname&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>We can then view them with a trick I bet you remember by now.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/top_supporters_df.png" src="_images/top_supporters_df.png" />
<p>Now that matplotlib is installed, making a simple chart is as simple as stringing the <code class="docutils literal"><span class="pre">plot</span></code> method onto the end of your <code class="docutils literal"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/bar.png" src="_images/bar.png" />
<p>You can rotate the bar chart so that it is horizontal by subituting in the <code class="docutils literal"><span class="pre">barh</span></code> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/barh.png" src="_images/barh.png" />
<p>The chart can be limited to the first five records by slipping in the <code class="docutils literal"><span class="pre">head</span></code> command.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/barh_head.png" src="_images/barh_head.png" />
<p>What are those y axis labels? Those are the row number (pandas calls them indexes) of each row. We don&#8217;t want that. We want the names. We can swap them in by saving our chart to a variable and then using another matplotlib option, <code class="docutils literal"><span class="pre">set_yticklabels</span></code> to instruct the system which field to use.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">top_supporters</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
<span class="n">chart</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">top_supporters</span><span class="o">.</span><span class="n">contributor_lastname</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/barh_lastname.png" src="_images/barh_lastname.png" />
<p>Okay, but what if I want to combine the first and last name? We have the data we need in two separate columns, which we can put together simply by inventing a new field on our data frame and, just like a variable, setting it equal to a combination of the other fields.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="p">[</span><span class="s1">&#39;contributor_fullname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">top_supporters</span><span class="o">.</span><span class="n">contributor_firstname</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">top_supporters</span><span class="o">.</span><span class="n">contributor_lastname</span>
</pre></div>
</div>
<p>We can see the results right here.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>Now using that in the chart is as simple as substituting in the <code class="docutils literal"><span class="pre">set_yticklabels</span></code> method we used above.</p>
<img alt="_images/fullname.png" src="_images/fullname.png" />
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">top_supporters</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">amount</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
<span class="n">chart</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">top_supporters</span><span class="o">.</span><span class="n">contributor_fullname</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/barh_fullname.png" src="_images/barh_fullname.png" />
<p>That&#8217;s all well and good, but this chart is still pretty ugly. If you wanted to hand this data off to your graphics department, or try your hand at a simple chart yourself using something like <a class="reference external" href="https://quartz.github.io/Chartbuilder/">Chartbuilder</a>, you&#8217;d need to export this data into a spreadsheet.</p>
<p>Guess what? It&#8217;s this easy.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">top_supporters</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;top_supporters.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And that&#8217;s it. You&#8217;ve completed this class. If you want to keep working, try inventing your own questions to ask and answer with the database, or find more information to analyze at <a class="reference external" href="http://www.californiacivicdata.org/">californiacivicdata.org</a>.</p>
<p>If you have any questions or feedback on the class, please contact me at <a class="reference external" href="mailto:ben&#46;welsh&#37;&#52;&#48;gmail&#46;com">ben<span>&#46;</span>welsh<span>&#64;</span>gmail<span>&#46;</span>com</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Ben Welsh and the California Civic Data Coalition.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>