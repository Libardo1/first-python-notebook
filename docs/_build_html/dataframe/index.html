

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 5: Hello data &mdash; First Python Notebook 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="First Python Notebook 1.0 documentation" href="../index.html"/>
        <link rel="next" title="Chapter 6: Hello columns" href="../value_counts/index.html"/>
        <link rel="prev" title="Chapter 4: Hello money in politics" href="../money/index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> First Python Notebook
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../prerequisites/index.html">Prologue: Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virtualenv/index.html">Chapter 1: Hello virtualenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebook/index.html">Chapter 2: Hello Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandas/index.html">Chapter 3: Hello pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../money/index.html">Chapter 4: Hello money in politics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Chapter 5: Hello data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-dataframe">Creating a DataFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-variable">Creating a variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-head-method">Using the head method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-info-method">Using the info method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-another-dataframe">Creating another DataFrame</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../value_counts/index.html">Chapter 6: Hello columns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filter/index.html">Chapter 7: Hello filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../merge/index.html">Chapter 8: Hello merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../totals/index.html">Chapter 9: Hello totals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sort_values/index.html">Chapter 10: Hello sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../groupby/index.html">Chapter 11: Hello groupby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Chapter 12: Hello git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../markdown/index.html">Chapter 13: Hello Markdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../github/index.html">Chapter 14: Hello GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../charts/index.html">Chapter 15: Hello charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cleaning/index.html">Chapter 16: Hello cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About the author</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">First Python Notebook</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          









<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Home</a> &raquo;</li>
        
      
      <li>Chapter 5: Hello data</li>
      
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="chapter-5-hello-data">
<h1>Chapter 5: Hello data<a class="headerlink" href="#chapter-5-hello-data" title="Permalink to this headline">¶</a></h1>
<p>Now it&#8217;s time to get our hands on some real data.</p>
<div class="embed-container"><iframe src="http://www.youtube.com/embed/2WmHjX5V4v0"     width="560" height="315" frameborder="0"     webkitAllowFullScreen mozallowfullscreen allowfullscreen class="youtube"></iframe></div><p>Our data source will be the <a class="reference external" href="http://www.californiacivicdata.org/">California Civic Data Coalition</a>, an open-source network of journalists and developers that maintains an archive of data tracking money in California politics.</p>
<p>The coalition has created simplified data files containing the disclosure forms that committees campaigning either for against one of the 17 propositions on the ballot in November 2016 filed with the state of California.</p>
<p>They are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="/_static/committees.csv">committees.csv</a></td>
<td>Committees active in the election linked to propositions supported or opposed</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="/_static/contributions.csv">contributions.csv</a></td>
<td>Donors reported by each of the committees</td>
</tr>
</tbody>
</table>
<p>The data are structured in rows of comma-separated values. This is known as a <a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV file</a>. It is the most common way you will find data published online.</p>
<div class="section" id="creating-a-dataframe">
<h2>Creating a DataFrame<a class="headerlink" href="#creating-a-dataframe" title="Permalink to this headline">¶</a></h2>
<p>The pandas library is able to read in files from a variety formats, including CSV.</p>
<p>If it&#8217;s not currently running start up your Jupyter Notebook as described in <a class="reference internal" href="../notebook/index.html"><span class="doc">chapter two</span></a>.</p>
<p>Scroll down to the first open cell. There we will import the first CSV file listed above using the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html">read_csv</a> function included with pandas.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;http://www.firstpythonnotebook.org/_static/committees.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You will need to precisely type in the URL to the file. Feel free to copy and paste it from the example above into your notebook.</p>
</div>
<p>After you run the cell, you should see a big table printed below.</p>
<p>It is a DataFrame where pandas has structured the CSV data into rows and columns, just like Excel or other spreadsheet software might.</p>
<p>The advantage here is that rather than manipulating the data through a haphazard series of clicks and keypunches we will be gradually grinding down the data using a computer programming script that is 100% transparent and reproducible.</p>
</div>
<div class="section" id="creating-a-variable">
<h2>Creating a variable<a class="headerlink" href="#creating-a-variable" title="Permalink to this headline">¶</a></h2>
<p>In order to do that, we need to store our DataFrame so it can be reused in subsequent cells. We can do this by saving in a <a class="reference external" href="https://en.wikipedia.org/wiki/Variable_(computer_science)">&#8220;variable&#8221;</a>, which is a fancy computer programming word for a named shortcut where we save our work as we go.</p>
<p>Go back to your initial cell and change it to this. Then rerun it.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;http://www.firstpythonnotebook.org/_static/committees.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After you run it, you shouldn&#8217;t see anything. That&#8217;s a good thing. It means our DataFrame has been saved under the name props, which we can now begin interacting with in the cells that follow.</p>
<p>We can do this by calling <a class="reference external" href="https://en.wikipedia.org/wiki/Method_(computer_programming)">&#8220;methods&#8221;</a> that pandas has made available to all DataFrames.</p>
<p>You may not have known it at the time, but read_csv was one of these methods. There are dozens more that can do all sorts of interesting things. Let&#8217;s start with some easy ones that analysts use all the time.</p>
</div>
<div class="section" id="using-the-head-method">
<h2>Using the head method<a class="headerlink" href="#using-the-head-method" title="Permalink to this headline">¶</a></h2>
<p>First, to preview the first few rows of the dataset, try the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html">head</a> method. Hit the <code class="docutils literal"><span class="pre">+</span></code> button in the toolbar to add a new cell below the first one. Type this in it and hit the run button again.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-info-method">
<h2>Using the info method<a class="headerlink" href="#using-the-info-method" title="Permalink to this headline">¶</a></h2>
<p>To get a look at all of the columns and what type of data they store, add another cell and try <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.info.html">info</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">props</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<p>Look carefully at those results and you see we have more than 100 links between committees and propositions.</p>
</div>
<div class="section" id="creating-another-dataframe">
<h2>Creating another DataFrame<a class="headerlink" href="#creating-another-dataframe" title="Permalink to this headline">¶</a></h2>
<p>With that we&#8217;re ready to move on to a related, similar task: Importing all of the individual contributions reported to last year&#8217;s 17 ballot measures.</p>
<p>We&#8217;ll start by using the read_csv method to import the second CSV file linked above. Save it as a new variable just as we did before. Let&#8217;s call this one contribs.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">contribs</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;http://www.firstpythonnotebook.org/_static/contributions.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Just as we did earlier, you can inspect the contents of this new file with the head method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">contribs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>You should also inspect the columns using the info method. Running these two tricks whenever you open a new file is a good habit to develop so that you can carefully examine the data you&#8217;re about to work with.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">contribs</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<p>Now that you&#8217;ve got some data imported, we&#8217;re ready to begin our analysis.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../value_counts/index.html" class="btn btn-neutral float-right" title="Chapter 6: Hello columns" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../money/index.html" class="btn btn-neutral" title="Chapter 4: Hello money in politics" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Ben Welsh and the California Civic Data Coalition.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>